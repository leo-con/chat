<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Co-browse Pruebas</title>
</head>
<body>
<style>
.center {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 200px;
  
}

.webchat-frame
{
    height: 50%;
    width: 50%;
    margin: auto;
    display: block;
}

</style>
    <h1 id="test91">Simple co-browse with voice example ..</h1>
<div class="center">
        <button type="button" id="start-cobrowse" onclick="genesysWebchat.startCobrowse()">Ingresar Co-browse Security Key</button>
<div>
      <select name="cars" id="cars">
        <option value="volvo">Volvo</option>
        <option value="saab">Saab</option>
        <option value="opel">Opel</option>
        <option value="audi">Audi</option>
    </select>
</div>
</div>


   <!-- Div with this id required to display security key form -->
    <div id="cobrowse-security-form"></div>

    <!-- Co-browse with voice uses the webchat API, so include it here -->
    <script src="https://apps.mypurecloud.com/webchat/jsapi-v1.js" type="text/javascript"></script>

    <!-- For co-browse with voice, you must load the co-browse API. Co-browse with web chat loads the co-browse API for you. -->
    <!-- <script src="https://cobrowse.mypurecloud.com/cobrowse-jsapi-v1.js?deploymentKey=g6VVHnWCx2jPe0Vl4pzwollWXiJqnHoI" type="text/javascript"></script> latamps-->
    <script src="https://cobrowse.mypurecloud.com/cobrowse-jsapi-v1.js?deploymentKey=zvt5oJqVEzO2oerI32veMCgcRsc8xeT8" type="text/javascript"></script>

    <script type="text/javascript">
    let  intervalID;
    let genesysWebchat = (function() {
        function createCobrowseConfig(){

            return {
                // Web chat application URL. Use the correct top-level domain for your Genesys Cloud region, i.e. apps.mypurecloud.ie, apps.mypurecloud.jp, apps.mypurecloud.co.uk.
                "webchatAppUrl": "https://apps.mypurecloud.com/webchat",

                // Web chat service URL
                "webchatServiceUrl": "https://realtime.mypurecloud.com:443",

                // OrgGuid. Needed for co-browse with voice.
                //"orgGuid": "c8bb9493-2b8c-415a-b7b1-44cef16960f8",  latamps
                "orgGuid": "c3fe9f74-924f-4ca8-a293-96900e7f8bf5",

                // Organization name
                //"orgName": "LatamPS",
                "orgName": "bancodaviviendasa",

                // Log level
                "logLevel": "DEBUG",

                // Locale code
                "locale": "es",

                // CSS class applied to the security key window, but not its contents
                "cssClass": "webchat-frame",
                // Custom style applied to the security key window, but not its contents
                "css": {
                    "width": "50%",
                    "height": "50%"
                },

                // Optional CSS for styling security key form
                //"contentCssUrl": "https://lableo.com:5500/css/cobr.css",

                // Element id where the security key form will appear.
                "containerEl": "cobrowse-security-form",

                // Set to true to display security key form. Do not include for co-browse with web chat or for PureConnect co-browse with voice.
                "promptForSecurityKey": true
            };
        }
        return {
            startCobrowse: function() {
                let config = createCobrowseConfig();

                // Can also use callback
                ININ.cobrowse.create(config)
                    .then(function(result) {
                        // Handle success

                    })
                    .catch(function(err) {
                        // Handle failure
                    });

            }
        }


    })();


    </script>

    <script type="text/javascript">

        window.onload = function() {
           window.addEventListener("message", (event) => {
            if(event.origin !== 'https://dhqbrvplips7x.cloudfront.net')
                 return;
                console.log('::::::::::::::::::::::::::::event.data:::::::::::::::::::::::');
                console.log(event);
                console.log(event.data);
                console.log('::::::::::::::::::::::::::::event.data  ejecutar :::::::::::::::::::::::');
            if (window.PureCloud.cobrowse.getSharerSession().data.sessionState.data == 'ENDED'){
                console.log('::::::::::::::::::::::::::::* SESION CERRADA :::::::::::::::::::::::');
            }
            }, false);
         };


    </script>

<div>
    <button onclick="document.getElementById('ifrm').src = document.getElementById('ifrm').src">Refresh</button>
</div>
<div>
    <iframe id="ifrm" src="https://www.wikipedia.org/" 
        style="height: 70%; border: 1px; width: 40%;">
    </iframe>
</div>

</body>
</html>
